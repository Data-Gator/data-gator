\doxysection{src/main.cpp File Reference}
\hypertarget{main_8cpp}{}\label{main_8cpp}\index{src/main.cpp@{src/main.cpp}}


Initializes device and calls routines.  


{\ttfamily \#include $<$Arduino.\+h$>$}\newline
{\ttfamily \#include $<$cstring$>$}\newline
{\ttfamily \#include "{}SDReader.\+hpp"{}}\newline
{\ttfamily \#include $<$version.\+hpp$>$}\newline
{\ttfamily \#include $<$pinout.\+hpp$>$}\newline
{\ttfamily \#include $<$config.\+hpp$>$}\newline
{\ttfamily \#include $<$firebeetle\+\_\+sleep.\+hpp$>$}\newline
{\ttfamily \#include $<$update.\+cpp$>$}\newline
{\ttfamily \#include $<$logging\+\_\+util.\+cpp$>$}\newline
{\ttfamily \#include $<$mqtt\+\_\+util.\+hpp$>$}\newline
{\ttfamily \#include $<$setup\+\_\+util.\+hpp$>$}\newline
{\ttfamily \#include $<$scheduler.\+hpp$>$}\newline
{\ttfamily \#include $<$logger.\+hpp$>$}\newline
{\ttfamily \#include $<$SPI.\+h$>$}\newline
{\ttfamily \#include $<$Https\+OTAUpdate.\+h$>$}\newline
{\ttfamily \#include $<$Preferences.\+h$>$}\newline
{\ttfamily \#include $<$NTPClient.\+h$>$}\newline
{\ttfamily \#include $<$Wi\+Fi\+Udp.\+h$>$}\newline
Include dependency graph for main.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main_8cpp__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{main_8cpp_a4a46279717733648d2fdc69dfa33af50}\label{main_8cpp_a4a46279717733648d2fdc69dfa33af50} 
Pub\+Sub\+Client {\bfseries mqtt\+\_\+client} (wifi\+\_\+client)
\item 
void \mbox{\hyperlink{main_8cpp_a4fc01d736fe50cf5b977f755b675f11d}{setup}} ()
\begin{DoxyCompactList}\small\item\em Setup initializes sensor interfaces, NVS, wireless protocols, and logging options. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{main_8cpp_afe461d27b9c48d5921c00d521181f12f}{loop}} ()
\begin{DoxyCompactList}\small\item\em Read sensors, log data, and hibernate. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
Adafruit\+\_\+\+ADS1115 \mbox{\hyperlink{main_8cpp_a951ac31de71c2bf701a13e5f233fc6d8}{ads}}
\item 
Adafruit\+\_\+\+MAX17048 \mbox{\hyperlink{main_8cpp_a106fc9194d62779ffe942b866046530d}{maxlipo}}
\item 
\Hypertarget{main_8cpp_ac334200b5e3db6f6228d37cec3b03538}\label{main_8cpp_ac334200b5e3db6f6228d37cec3b03538} 
bool {\bfseries maxlipo\+\_\+attached}
\item 
\Hypertarget{main_8cpp_a2df27a00b191de3537c3b53adcecf1e8}\label{main_8cpp_a2df27a00b191de3537c3b53adcecf1e8} 
int {\bfseries reset\+\_\+count}
\item 
const bool \mbox{\hyperlink{main_8cpp_a45a3fd1220b5c8c7557fb18db8c20e50}{USB\+\_\+\+DEBUG}} = \mbox{\hyperlink{config_8hpp_ad72dbcf6d0153db1b8d8a58001feed83}{DEBUG}}
\item 
\Hypertarget{main_8cpp_afafd0fc922c17c38235820189e1d9b3b}\label{main_8cpp_afafd0fc922c17c38235820189e1d9b3b} 
Wi\+Fi\+Client {\bfseries wifi\+\_\+client}
\item 
Preferences \mbox{\hyperlink{main_8cpp_add9553c173198049d23f8a89fe11142c}{gator\+\_\+prefs}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Initializes device and calls routines. 

Uses the Arduino framework to initialize devices and call routines to collect data and manage power. 

\doxysubsection{Function Documentation}
\Hypertarget{main_8cpp_afe461d27b9c48d5921c00d521181f12f}\label{main_8cpp_afe461d27b9c48d5921c00d521181f12f} 
\index{main.cpp@{main.cpp}!loop@{loop}}
\index{loop@{loop}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily void loop (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Read sensors, log data, and hibernate. 

Although specified to loop infinitely, this function reads sensors, logs data, and finishes by putting the system into hibernation to conserve energy. \Hypertarget{main_8cpp_a4fc01d736fe50cf5b977f755b675f11d}\label{main_8cpp_a4fc01d736fe50cf5b977f755b675f11d} 
\index{main.cpp@{main.cpp}!setup@{setup}}
\index{setup@{setup}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily void setup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Setup initializes sensor interfaces, NVS, wireless protocols, and logging options. 

This is a more detailed description. 

\doxysubsection{Variable Documentation}
\Hypertarget{main_8cpp_a951ac31de71c2bf701a13e5f233fc6d8}\label{main_8cpp_a951ac31de71c2bf701a13e5f233fc6d8} 
\index{main.cpp@{main.cpp}!ads@{ads}}
\index{ads@{ads}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{ads}{ads}}
{\footnotesize\ttfamily Adafruit\+\_\+\+ADS1115 ads\hspace{0.3cm}{\ttfamily [extern]}}

Interface for the analog to digital converter. ~\newline
 \Hypertarget{main_8cpp_add9553c173198049d23f8a89fe11142c}\label{main_8cpp_add9553c173198049d23f8a89fe11142c} 
\index{main.cpp@{main.cpp}!gator\_prefs@{gator\_prefs}}
\index{gator\_prefs@{gator\_prefs}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{gator\_prefs}{gator\_prefs}}
{\footnotesize\ttfamily Preferences gator\+\_\+prefs}

NVS memory access interface. \Hypertarget{main_8cpp_a106fc9194d62779ffe942b866046530d}\label{main_8cpp_a106fc9194d62779ffe942b866046530d} 
\index{main.cpp@{main.cpp}!maxlipo@{maxlipo}}
\index{maxlipo@{maxlipo}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{maxlipo}{maxlipo}}
{\footnotesize\ttfamily Adafruit\+\_\+\+MAX17048 maxlipo\hspace{0.3cm}{\ttfamily [extern]}}

Interface for the battery fuel gauge. \Hypertarget{main_8cpp_a45a3fd1220b5c8c7557fb18db8c20e50}\label{main_8cpp_a45a3fd1220b5c8c7557fb18db8c20e50} 
\index{main.cpp@{main.cpp}!USB\_DEBUG@{USB\_DEBUG}}
\index{USB\_DEBUG@{USB\_DEBUG}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{USB\_DEBUG}{USB\_DEBUG}}
{\footnotesize\ttfamily const bool USB\+\_\+\+DEBUG = \mbox{\hyperlink{config_8hpp_ad72dbcf6d0153db1b8d8a58001feed83}{DEBUG}}}

Serial debug enable flag, set in config.\+h 